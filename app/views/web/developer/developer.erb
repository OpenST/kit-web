<%
  api_get_key = GlobalConstant::RoutesMap.getApis()[:get_api_keys]
  api_delete_key = GlobalConstant::RoutesMap.getApis()[:delete_api_key]
  developer_page_addresses = @presenter_obj.developer_page_addresses
  developer_addresses_config = [
      {
          "label" => "Account Owner Address:",
          "key_name" => "account_owner_address",
          "description" => "The Member Reserve address is the initial holder of your minted branded tokens, from which tokens are transferred to different accounts in your economy."
      },
      {
          "label" => "Company Token Holder Address:",
          "key_name" => "token_holder_address",
          "description" => "The Member Reserve address is the initial holder of your minted branded tokens, from which tokens are transferred to different accounts in your economy."
      },
      {
          "label" => "Utility Branded Token Address:",
          "key_name" => "utility_branded_token_contract",
          "description" => "In addition, you will find the Airdrop contract and the Budget Holder addresses for your Branded Token. After the Branded Token and Airdrop contracts are deployed, airdrop tokens are transferred from the Member Reserve Address to the Budget Holder Address."
      },
      {
          "label" => "Branded Token Address:",
          "key_name" => "branded_token_contract",
          "description" => "Your Branded Token's Budget Holder Address will reserve the tokens to be airdropped. The Airdrop contract will manage transactions within your economy."
      },
      {
          "label" => "OST⍺ ERC20 contract address:",
          "key_name" => "erc20_contract_address",
          "description" => "Below you will find OST⍺ ERC20 contract address on the Ropsten Test Network and your company's Universally Unique Identifier (UUID). Company UUID is required as a parameter in order to execute transactions between the company and users using APIs."
      },
      {
          "label" => "Company UUID:",
          "key_name" => "company_user_id",
          "description" => "Your Branded Token's Budget Holder Address will reserve the tokens to be airdropped. The Airdrop contract will manage transactions within your economy."
      },
      {
          "label" => "Gateway UX Composer address:",
          "key_name" => "gateway_composer_address",
          "description" => "Below you will find OST⍺ ERC20 contract address on the Ropsten Test Network and your company's Universally Unique Identifier (UUID). Company UUID is required as a parameter in order to execute transactions between the company and users using APIs."
      }
  ]
%>

<div class="developers-container">
  <div class="container m-5">
    <h3 class=" mt-5 ">
      Developers
    </h3>
    <div class=" mt-5">
      <h4 class="mb-3">Get API Keys</h4>
      <p>
        In order to use OST Platform APIs you will have to authenticate your account by including an API signature in every request. Signatures validate the authenticity of the account which interacts with OST Platform and ensures that the message sent has not been tampered.
        <br/>
        Please make sure to never share your API Secret Key and to keep it private and secure. You can generate a new set of API Keys, with the previous set automatically to expire in 24 hours. You can also manually delete old keys.
      </p>
      <button type="button" class="btn btn-primary mt-3 show-keys-btn" data-submiting="Fetching..." >Show Keys</button>
      <button type="button" class="btn btn-primary mt-3 generate-key-btn" data-submiting="Creating...">Create New Keys</button>
      <div class="error mt-2 generate-key-error"></div>
      <div class="keys-wrapper"></div>
    </div>

    <div>
      <h4 class="mb-3">Developer Docs</h4>
      <p>
        OST Platform gives you all the tools to run your blockchain-powered brand economy. You can find quick start guides, platform overview, UX guides and more.
      </p>
      <div class="text-left">
        <!--        TODO: Add links to icons-->
        <a class="d-inline" href="https://dev.stagingost.com/kit/docs/getting_started/introduction/" target="_blank">
          <svg class="icon ios-icon" style="height: 60px;width: 150px;">
            <switch>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#guides-icon"></use>
            </switch>
          </svg>
        </a>

      </div>

    </div>

    <div class=" mt-5">
      <h4 class="mb-3">Wallet SDKs</h4>
      <p>
        The Wallet SDK makes it easy to integrate full wallet experience inside your app.
      </p>
      <p>
        The quick start guides below will help you get familiar with requirements and process of integrating the Wallet SDK into your app. If you're looking for more detailed information about any class in the SDKs, feel free to explore our SDK Github Repository. Links to the repositories can be found in the quick start guides.
      </p>
      <div class="text-left">
        <!--        TODO: Add links to icons-->
        <a class="d-inline" href="#">
          <svg class="icon ios-icon" style="height: 60px;width: 150px;">
            <switch>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ios-icon"></use>
            </switch>
          </svg>
        </a>
        <a class="d-inline" href="#">
          <svg class="icon android-icon" style="height: 60px;width: 150px;">
            <switch>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#android-icon"></use>
            </switch>
          </svg>
        </a>
      </div>

    </div>

    <div class=" mt-5">
      <h4 class="mb-3">
        Server Side SDKs
      </h4>
      <p>
        The OST SDK makes it easy to build an excellent tokenization experience in your application. It provides powerful services to use out-of-the-box to create and run your token economy.
      </p>
      <p>
        The Quick start guide links below will take you all the way from integrating our SDK to creating users, airdropping and transferring tokens among these users. If you're looking for more detailed information about any class in the SDKs, feel free to explore our SDK Github Repository. Links to the github repository of respective SDK are provided in the quick start guides.
      </p>
      <div class="text-left">
        <a class="d-inline" href="#">
          <svg class="icon developer_ruby_logo" style="height: 60px;width: 150px;">
            <switch>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#developer_ruby_logo"></use>
            </switch>
          </svg>
        </a>
        <a class="d-inline" href="#">
          <svg class="icon developer_php_logo" style="height: 60px;width: 150px;">
            <switch>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#developer_php_logo"></use>
            </switch>
          </svg>
        </a>
      </div>
    </div>
    <div class="mt-5">
      <h4>
        Your Brand Economy Addresses on Utility Chain
      </h4>
      <p>
        Below you will find your Company Token Holder Address, Branded Token Addresses and OST⍺ ERC20 contract address.
      </p>
      <% developer_addresses_config.each do |address| %>
        <% if developer_page_addresses && developer_page_addresses.data[address['key_name']] %>
          <div class="dev-container-box p-3 px-4 mb-3">
            <h4>
              <%= address['label'] %>
            </h4>
            <p class="my-1">
              <%= developer_page_addresses.data[address['key_name']] %>
            </p>
            <p>
              <%= address['description']%>
            </p>
          </div>
        <% end%>
      <%end %>
    </div>
  </div>
</div>

<% content_for :end_js do %>
  <script type="text/javascript">
    ost.developer.init({
      'api_get_key' : "<%= api_get_key %>",
      'api_delete_key' : "<%= api_delete_key %>"
    });

    Handlebars.registerHelper('prettifyDate',function( timestamp ){
      return moment(timestamp*1000).format('Do MMM YYYY');
    });

  </script>

  <script type="text/x-handlebars-template" id="api-info">
    <div class="my-5">
      {{#each keys}}
      <div class="dev-container-box mt-3 p-3">
        <div class="row">
          <div class="col-8">
            <h4>API Key</h4>
            <p>{{key}}</p>
          </div>
          {{#if expiry_timestamp}}
          <div class="col-4">
            <div class="float-right d-inline d-flex align-items-center">
              <span class="mr-2 expiry">Expires on {{prettifyDate expiry_timestamp}}</span>
              <span class="api-delete-btn">
                  <svg class="align-middle" style="height: 35px;width: 35px;">
                    <switch>
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#api-delete-icon"></use>
                    </switch>
                  </svg>
                </span>
            </div>
          </div>
          {{/if}}
        </div>
        <div>
          <h4>API Secret</h4>
          <p>{{secret}}</p>
        </div>
        <div class="error delete-key-error"></div>
      </div>
      {{/each}}
    </div>
  </script>
<% end %>

<% content_for :popups do %>
  <%= render partial: 'shared/web/modals/token_setup_admin_error'%>
<% end %>